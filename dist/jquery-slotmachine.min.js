/*! jQuery Slot Machine Plugin - v0.1.0 - 2013-03-28
* https://github.com/justinedelson/jquery-slotmachine
* Copyright (c) 2013 Justin Edelson; Licensed MIT */
(function(e){function s(e){return e+"px"}function o(t){var i=0;return t.find("."+n).find("."+r).each(function(t,n){i+=e(n).height()}),i}function u(t,i,s){var u=t.find("."+n).first(),a=t.height(),f=o(t),l=u.css("top")==="auto"?0:parseInt(u.css("top"),10),c=s?l+i:l-i,h=f-a+c,p=f-a-c,d=function(t,n){e(n).clone(!0).appendTo(u)},v=function(t,n){e(n).clone(!0).prependTo(u)},m;while(h<0)u.find("."+r).slice(0,t.data("linksCount")).each(d),f=o(t),h=f-a+c;c>0&&(m=u.find("."+r).slice(0,t.data("linksCount")).toArray().reverse(),e.each(m,v),c-=f),u.css("top",c)}function a(t){t||(t=1),e.each(i,function(e,n){u(n,t,e%2!==0)})}function f(o,a){var f=a.width,l=a.height,c=f/2,h=e("<div/>"),p=o.attr("id"),d,v=e("<div/>").addClass(n).css({position:"relative"}),m=v.clone(),g=a.onclick||function(){return!0},y=o.find("a"),b=y.size();h.addClass(t).height(l).width(c).css({overflow:"hidden",display:"block","border-style":"","float":"left"}),d=h.clone(),h.append(v),h.data("linksCount",b),d.append(m),d.data("linksCount",b),p&&(h.attr("data-sourceId",p),d.attr("data-sourceId",p)),y.each(function(t,n){var i=e(n),o=e(n).find("img").first();e("<div/>").addClass(r).css({"background-image":"url("+o.attr("src")+")",cursor:"pointer",height:s(o.attr("height")),width:s(f)}).click(i,g).appendTo(v),e("<div/>").addClass(r).css({"background-image":"url("+o.attr("src")+")",cursor:"pointer","background-position":s("-"+c),height:s(o.attr("height")),width:s(f)}).click(i,g).appendTo(m)}),o.after(h),h.after(d),o.remove(),i.push(h),i.push(d),a.initial&&(u(h,a.initial,!1),u(d,a.initial,!0))}var t="slotMachine-scroll-container",n="slotMachine-inner",r="slotMachine-image",i=[];e.fn.slotMachine=function(t){return this.each(function(n,r){f(e(r),t)})},function(){var t=0,n=0,r=!1;e(window).scroll(function(){var i=0;n=e(window).scrollTop(),i=n-t,r&&i!==0&&a(5*i),r=!0,t=n})}()})(jQuery);